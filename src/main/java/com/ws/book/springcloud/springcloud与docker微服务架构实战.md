作者 : 周立

版本:
    ● Spring Boot 1.4.3.RELEASE
    ● Spring Cloud Camden SR4


一个归档包 (例如war格式)包含所有功能的应用程序，通常称为单体应用。而架构单体应用的方法论，就是单体应用架构。

单体应用存在的一-些问题:
    ● 复杂性高: 代码量繁多,模块繁杂,增加或修改bug问题重重,整个项目复杂性非常高
    ● 可靠性差:某个应用Bug,例如死循环、OOM等，可能会导致整个应用的崩溃。
    ● 扩展能力受限:单体应用只能作为一个整体进行扩展，无法根据业务模块的需要进行伸缩。例如，应用中有的模块是计算密集型的，它需要强劲的CPU;有的模块则
是IO密集型的，需要更大的内存。由于这些模块部署在一起，不得不在硬件的选择做出妥协。
    ● 阻碍技术创新:单体应用往往使用统的技术平台或方案解决所有的问题，团队中的每个成员都必须使用相同的开发语言和框架，要想引人新框架或新技术平台会非
常困难。如，一个使用 Struts 2构建的、有100 万行代码的单体应用， 如果想要换用Spring MVC,毫无疑问切换的成本是非常高的。

什么是微服务:
    微服务架构风格是一种将个单一应用程序开发为一组小型服务的方法，每个服务运行在自己的进程中，服务间通信采用轻量级通信机制(通常用HTTP资源API)。
这些服务围绕业务能力构建并且可通过全自动部署机制独立部署。这些服务共用一个最小型的集中式的管理，服务可用不同的语言开发，使用不同的数据存储技术。
    微服务架构应具备以下特性:
        ● 每个微服务可独立运行在自己的进程里。
        ● 一系列独立运行的微服务共同构建起整个系统。
        ● 每个服务为独立的业务开发，一个微服务只关注某个特定的功能，例如订单管理、用户管理等。
        ● 微服务之间通过-些轻量的通信机制进行通信，例如通过RESTful API进行调用。
        ● 可以使用不同的语言与数据存储技术。
        ● 全自动的部署机制。
        
微服务架构有如下优点。
    ● 易于开发和维护:一个微服务只会关注个特定的业务功能，所以它业务清晰、代码量较少。开发和维护单个微服务相对简单。而整个应用是由若千个微服务构建而
成的，所以整个应用也会被维持在一个可控状态。
    ● 单个微服务启动较快:单个微服务代码量较少，所以启动会比较快。
    ● 局部修改容易部署:单体应用只要有修改，就得重新部署整个应用，微服务解决了这样的问题。一般来说，对某个微服务进行修改，只需要重新部署这个服务即可。
    ● 技术栈不受限:在微服务架构中，可以结合项业务及团队的特点，合理地选择技术栈。例如某些服务可使用关系型数据库MySQL;某些微服务有图形计算的需求，可
以使用Neo4j;甚至可根据需要,部分微服务使用Java开发，部分微服务使用Nodejs开发。
    ● 按需伸缩:可根据需求，实现细粒度的扩展。例如，系统中的某个微服务遇到了瓶颈，可以结合这个微服务的业务特点，增加内存、升级CPU或者是增加节点。

使用微服务架构面临的挑战:
    ● 运维要求较高:更多的服务意味着更多的运维投人。在单体架构中，只需要保证一个应用的正常运行。而在微服务中，需要保证几十甚至几百个服务的正常运行与协
作，这给运维带来了很大的挑战。
    ● 分布式固有的复杂性:使用微服务构建的是分布式系统。对于一个分布式系统，系统容错、网络延迟、分布式事务等都会带来巨大的挑战。
    ● 接口调整成本高:微服务之间通过接口进行通信。如果修改某一一个微服务的API,可能所有使用了该接口的微服务都需要做调整。
    ● 重复劳动:很多服务可能都会使用到相同的功能，而这个功能并没有达到分解为一一个微服务的程度，这个时候，可能各个服务都会开发这功能， 从而导致代码重复。

微服务设计原则:
    ● 单一职责原则
    单一职责原则指的是一个单元(类、方法或者服务等)只应关注整个系统功能中单独、有界限的部分。单一职责原则可以帮助我们更优雅地开发、更敏捷地交付。
单职责原则是SOLID原则之一.
    ● 服务自治原则
    服务自治是指每个微服务应具备独立的业务能力、依赖与运行环境。在微服务架构中，服务是独立的业务单元，应该与其他服务高度解耦。每个微服务从开发、测试、
构建、部署，都应当可以独立运行，而不应该依赖其他的服务。
    ● 轻量级通信机制
    微服务之间应该通过轻量级的通信机制进行交互。笔者认为，轻量级的通信机制应具备两点:首先是它的体量较轻;其次是它应该是跨语言、跨平台的。例如我们所
熟悉的REST协议，就是一个典型的 “轻量级通信机制";而例如Java的RMI则协议就不大符合轻量级通信机制的要求，因为它绑定了Java 语言。
微服务架构中，常用的协议有REST、AMQP、STOMP、 MQTT等。
    ● 微服务粒度
    微服务的粒度是难点，也常常是争论的焦点。应当使用合理的粒度划分微服务，而不是一味地把服务做小。代码量的多少不能作为微服务划分的依据，因为不同的微
服务本身的业务复杂性不同，代码量也不同。在微服务的设计阶段，就应确定其边界。微服务之间应相对独立并保持松耦合。

Spring Cloud简介:
    SpringCloud是在SpringBoot基础上构建的，用于快速构建分布式系统的通用模式的工具集。Spring Cloud有以下特点:
      ● 约定优于配置。
      ● 适用于各种环境。开发、部署在PC Server或各种云环境(例如阿里云、AWS等)均可。
      ● 隐藏了组件的复杂性，并提供声明式、无xml的配置方式。
      ● 开箱即用，快速启动。
      ● 轻量级的组件。Spring Cloud整合的组件大多比较轻量。例如Eureka、 Zul,等等，都是各自领域轻量级的实现。
      ● 组件丰富，功能齐全。Spring Cloud为微服务架构提供了非常完整的支持。例如，配置管理、服务发现、断路器、微服务网关等。
      ● 选型中立、丰富。例如，Spring Cloud支持使用Eureka、Zookeeper 或Consul实现服务发现。
      ● 灵活。Spring Cloud的组成部分是解耦的，开发人员可按需灵活挑选技术选型。


@SpringBootApplication是一个组合注解，它整合了@Configuration、@EnableAutoCon-figuration和@ComponentScan注解，
并开启了Spring Boot程序的组件扫描和自动配置功能。在开发Spring Boot程序的过程中，常常会组合使用@Configuration、
@Enable-AutoConfiguration和@ComponentScan等注解，所以Spring Boot提供了@SpringootApp-lication,来简化开发。




